{"ast":null,"code":"import { getMetadataArgsStorage } from \"../globals\";\nimport { ObjectUtils } from \"../util/ObjectUtils\";\n/**\n * Creates a database index.\n * Can be used on entity property or on entity.\n * Can create indices with composite columns when used on entity.\n */\n\nexport function Index(nameOrFieldsOrOptions, maybeFieldsOrOptions, maybeOptions) {\n  // normalize parameters\n  const name = typeof nameOrFieldsOrOptions === \"string\" ? nameOrFieldsOrOptions : undefined;\n  const fields = typeof nameOrFieldsOrOptions === \"string\" ? maybeFieldsOrOptions : nameOrFieldsOrOptions;\n  let options = ObjectUtils.isObject(nameOrFieldsOrOptions) && !Array.isArray(nameOrFieldsOrOptions) ? nameOrFieldsOrOptions : maybeOptions;\n  if (!options) options = ObjectUtils.isObject(maybeFieldsOrOptions) && !Array.isArray(maybeFieldsOrOptions) ? maybeFieldsOrOptions : maybeOptions;\n  return function (clsOrObject, propertyName) {\n    getMetadataArgsStorage().indices.push({\n      target: propertyName ? clsOrObject.constructor : clsOrObject,\n      name: name,\n      columns: propertyName ? [propertyName] : fields,\n      synchronize: options && options.synchronize === false ? false : true,\n      where: options ? options.where : undefined,\n      unique: options && options.unique ? true : false,\n      spatial: options && options.spatial ? true : false,\n      fulltext: options && options.fulltext ? true : false,\n      nullFiltered: options && options.nullFiltered ? true : false,\n      parser: options ? options.parser : undefined,\n      sparse: options && options.sparse ? true : false,\n      background: options && options.background ? true : false,\n      expireAfterSeconds: options ? options.expireAfterSeconds : undefined\n    });\n  };\n}","map":{"version":3,"mappings":"AAAA,SAASA,sBAAT,QAAuC,YAAvC;AAGA,SAASC,WAAT,QAA4B,qBAA5B;AAyEA;;;;;;AAKA,OAAM,SAAUC,KAAV,CACFC,qBADE,EAMFC,oBANE,EAWFC,YAXE,EAWyB;EAE3B;EACA,MAAMC,IAAI,GACN,OAAOH,qBAAP,KAAiC,QAAjC,GACMA,qBADN,GAEMI,SAHV;EAIA,MAAMC,MAAM,GACR,OAAOL,qBAAP,KAAiC,QAAjC,GAIOC,oBAJP,GAKOD,qBANX;EAOA,IAAIM,OAAO,GACPR,WAAW,CAACS,QAAZ,CAAqBP,qBAArB,KACA,CAACQ,KAAK,CAACC,OAAN,CAAcT,qBAAd,CADD,GAEOA,qBAFP,GAGME,YAJV;EAKA,IAAI,CAACI,OAAL,EACIA,OAAO,GACHR,WAAW,CAACS,QAAZ,CAAqBN,oBAArB,KACA,CAACO,KAAK,CAACC,OAAN,CAAcR,oBAAd,CADD,GAEOA,oBAFP,GAGMC,YAJV;EAMJ,OAAO,UACHQ,WADG,EAEHC,YAFG,EAE2B;IAE9Bd,sBAAsB,GAAGe,OAAzB,CAAiCC,IAAjC,CAAsC;MAClCC,MAAM,EAAEH,YAAY,GACdD,WAAW,CAACK,WADE,GAEbL,WAH2B;MAIlCP,IAAI,EAAEA,IAJ4B;MAKlCa,OAAO,EAAEL,YAAY,GAAG,CAACA,YAAD,CAAH,GAAoBN,MALP;MAMlCY,WAAW,EACPX,OAAO,IACNA,OAAkC,CAACW,WAAnC,KAAmD,KADpD,GAEM,KAFN,GAGM,IAVwB;MAWlCC,KAAK,EAAEZ,OAAO,GAAGA,OAAO,CAACY,KAAX,GAAmBd,SAXC;MAYlCe,MAAM,EAAEb,OAAO,IAAIA,OAAO,CAACa,MAAnB,GAA4B,IAA5B,GAAmC,KAZT;MAalCC,OAAO,EAAEd,OAAO,IAAIA,OAAO,CAACc,OAAnB,GAA6B,IAA7B,GAAoC,KAbX;MAclCC,QAAQ,EAAEf,OAAO,IAAIA,OAAO,CAACe,QAAnB,GAA8B,IAA9B,GAAqC,KAdb;MAelCC,YAAY,EAAEhB,OAAO,IAAIA,OAAO,CAACgB,YAAnB,GAAkC,IAAlC,GAAyC,KAfrB;MAgBlCC,MAAM,EAAEjB,OAAO,GAAGA,OAAO,CAACiB,MAAX,GAAoBnB,SAhBD;MAiBlCoB,MAAM,EAAElB,OAAO,IAAIA,OAAO,CAACkB,MAAnB,GAA4B,IAA5B,GAAmC,KAjBT;MAkBlCC,UAAU,EAAEnB,OAAO,IAAIA,OAAO,CAACmB,UAAnB,GAAgC,IAAhC,GAAuC,KAlBjB;MAmBlCC,kBAAkB,EAAEpB,OAAO,GACrBA,OAAO,CAACoB,kBADa,GAErBtB;IArB4B,CAAtC;EAuBH,CA3BD;AA4BH","names":["getMetadataArgsStorage","ObjectUtils","Index","nameOrFieldsOrOptions","maybeFieldsOrOptions","maybeOptions","name","undefined","fields","options","isObject","Array","isArray","clsOrObject","propertyName","indices","push","target","constructor","columns","synchronize","where","unique","spatial","fulltext","nullFiltered","parser","sparse","background","expireAfterSeconds"],"sources":["C:\\Users\\darkh\\node_modules\\typeorm\\browser\\src\\decorator\\Index.ts"],"sourcesContent":["import { getMetadataArgsStorage } from \"../globals\"\nimport { IndexMetadataArgs } from \"../metadata-args/IndexMetadataArgs\"\nimport { IndexOptions } from \"./options/IndexOptions\"\nimport { ObjectUtils } from \"../util/ObjectUtils\"\n\n/**\n * Creates a database index.\n * Can be used on entity property or on entity.\n * Can create indices with composite columns when used on entity.\n */\nexport function Index(\n    options?: IndexOptions,\n): ClassDecorator & PropertyDecorator\n\n/**\n * Creates a database index.\n * Can be used on entity property or on entity.\n * Can create indices with composite columns when used on entity.\n */\nexport function Index(\n    name: string,\n    options?: IndexOptions,\n): ClassDecorator & PropertyDecorator\n\n/**\n * Creates a database index.\n * Can be used on entity property or on entity.\n * Can create indices with composite columns when used on entity.\n */\nexport function Index(\n    name: string,\n    options: { synchronize: false },\n): ClassDecorator & PropertyDecorator\n\n/**\n * Creates a database index.\n * Can be used on entity property or on entity.\n * Can create indices with composite columns when used on entity.\n */\nexport function Index(\n    name: string,\n    fields: string[],\n    options?: IndexOptions,\n): ClassDecorator & PropertyDecorator\n\n/**\n * Creates a database index.\n * Can be used on entity property or on entity.\n * Can create indices with composite columns when used on entity.\n */\nexport function Index(\n    fields: string[],\n    options?: IndexOptions,\n): ClassDecorator & PropertyDecorator\n\n/**\n * Creates a database index.\n * Can be used on entity property or on entity.\n * Can create indices with composite columns when used on entity.\n */\nexport function Index(\n    fields: (object?: any) => any[] | { [key: string]: number },\n    options?: IndexOptions,\n): ClassDecorator & PropertyDecorator\n\n/**\n * Creates a database index.\n * Can be used on entity property or on entity.\n * Can create indices with composite columns when used on entity.\n */\nexport function Index(\n    name: string,\n    fields: (object?: any) => any[] | { [key: string]: number },\n    options?: IndexOptions,\n): ClassDecorator & PropertyDecorator\n\n/**\n * Creates a database index.\n * Can be used on entity property or on entity.\n * Can create indices with composite columns when used on entity.\n */\nexport function Index(\n    nameOrFieldsOrOptions?:\n        | string\n        | string[]\n        | ((object: any) => any[] | { [key: string]: number })\n        | IndexOptions,\n    maybeFieldsOrOptions?:\n        | ((object?: any) => any[] | { [key: string]: number })\n        | IndexOptions\n        | string[]\n        | { synchronize: false },\n    maybeOptions?: IndexOptions,\n): ClassDecorator & PropertyDecorator {\n    // normalize parameters\n    const name =\n        typeof nameOrFieldsOrOptions === \"string\"\n            ? nameOrFieldsOrOptions\n            : undefined\n    const fields =\n        typeof nameOrFieldsOrOptions === \"string\"\n            ? <\n                  | ((object?: any) => any[] | { [key: string]: number })\n                  | string[]\n              >maybeFieldsOrOptions\n            : (nameOrFieldsOrOptions as string[])\n    let options =\n        ObjectUtils.isObject(nameOrFieldsOrOptions) &&\n        !Array.isArray(nameOrFieldsOrOptions)\n            ? (nameOrFieldsOrOptions as IndexOptions)\n            : maybeOptions\n    if (!options)\n        options =\n            ObjectUtils.isObject(maybeFieldsOrOptions) &&\n            !Array.isArray(maybeFieldsOrOptions)\n                ? (maybeFieldsOrOptions as IndexOptions)\n                : maybeOptions\n\n    return function (\n        clsOrObject: Function | Object,\n        propertyName?: string | symbol,\n    ) {\n        getMetadataArgsStorage().indices.push({\n            target: propertyName\n                ? clsOrObject.constructor\n                : (clsOrObject as Function),\n            name: name,\n            columns: propertyName ? [propertyName] : fields,\n            synchronize:\n                options &&\n                (options as { synchronize: false }).synchronize === false\n                    ? false\n                    : true,\n            where: options ? options.where : undefined,\n            unique: options && options.unique ? true : false,\n            spatial: options && options.spatial ? true : false,\n            fulltext: options && options.fulltext ? true : false,\n            nullFiltered: options && options.nullFiltered ? true : false,\n            parser: options ? options.parser : undefined,\n            sparse: options && options.sparse ? true : false,\n            background: options && options.background ? true : false,\n            expireAfterSeconds: options\n                ? options.expireAfterSeconds\n                : undefined,\n        } as IndexMetadataArgs)\n    }\n}\n"]},"metadata":{},"sourceType":"module"}